/* === Reset (минимум) === */
* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
a { color: inherit; text-decoration: none; }
h1, h2, h3 { margin: 0 0 .5rem 0; line-height: 1.2; }

/* === Палитра (Light by default) === */
:root {
  --bg: #ffffff;
  --elev: #fafafa;            /* фон на карточках/панелях */
  --fg: #111827;              /* основной текст */
  --muted: #4b5563;           /* вторичный текст */
  --brand: #2563eb;           /* акцент */
  --brand-600: #1e40af;
  --border: #e5e7eb;
  --focus: #0ea5e9;
  --ok: #16a34a;
  --warn: #f59e0b;
  --err: #dc2626;
  --shadow: 0 1px 2px rgba(0,0,0,.06), 0 8px 24px rgba(0,0,0,.06);
}

/* === Авто Dark === */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0b0f17;
    --elev: #111827;
    --fg: #e5e7eb;
    --muted: #9ca3af;
    --brand: #60a5fa;
    --brand-600: #3b82f6;
    --border: #1f2937;
    --focus: #22d3ee;
    --shadow: 0 1px 2px rgba(0,0,0,.3), 0 12px 30px rgba(0,0,0,.35);
  }
}

/* === Принудительная тема: добавь .theme-dark на <html>, если нужно === */
.theme-dark :root, html.theme-dark, body.theme-dark {
  --bg:#0b0f17; --elev:#111827; --fg:#e5e7eb; --muted:#9ca3af; --brand:#60a5fa;
  --brand-600:#3b82f6; --border:#1f2937; --focus:#22d3ee;
  --shadow: 0 1px 2px rgba(0,0,0,.3), 0 12px 30px rgba(0,0,0,.35);
}

/* === Базовая типографика/фон === */
html, body {
  background: var(--bg);
  color: var(--fg);
  -webkit-tap-highlight-color: transparent;
  line-height: 1.4;
  font-size: 16px;
}

/* Контейнер */
.container { max-width: 720px; margin: 0 auto; }
.app-padding {
  padding: max(16px, env(safe-area-inset-top))
           max(16px, env(safe-area-inset-right))
           max(16px, env(safe-area-inset-bottom))
           max(16px, env(safe-area-inset-left));
}

/* Заголовки */
h1 { font-size: clamp(20px, 2.2vw, 28px); font-weight: 800; }

/* Текстовые состояния */
.muted { color: var(--muted); }
.divider {
  height: 1px; background: var(--border);
  margin: 12px 0;
  opacity: .9;
}

/* === Карточки / панели === */
.card {
  background: var(--elev);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--shadow);
}
.card.pad { padding: 12px; }

/* === Формы === */
.input, select, .btn {
  width: 100%;
  padding: 12px 14px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--bg);
  color: var(--fg);
  font-size: 16px;
  transition: border-color .15s ease, background .15s ease, box-shadow .15s ease, transform .02s;
}
.input:focus, select:focus, .btn:focus {
  outline: 3px solid color-mix(in srgb, var(--focus) 40%, transparent);
  outline-offset: 2px;
}
label > input[type="checkbox"] { width: 20px; height: 20px; }

/* === Кнопки (варианты) === */
.btn {
  border: 1px solid transparent;
  background: var(--brand);
  color: #fff;
  font-weight: 700;
  cursor: pointer;
}
.btn:hover { filter: brightness(1.02); box-shadow: 0 4px 18px color-mix(in srgb, var(--brand) 35%, transparent); }
.btn:active { transform: translateY(1px); }
.btn[disabled] { opacity: .6; cursor: default; box-shadow: none; }

.btn-outline {
  background: transparent;
  color: var(--fg);
  border-color: var(--brand);
}
.btn-outline:hover { background: color-mix(in srgb, var(--brand) 12%, transparent); }

.btn-ghost {
  background: transparent;
  color: var(--fg);
  border-color: transparent;
}
.btn-ghost:hover { background: color-mix(in srgb, var(--fg) 8%, transparent); }

.btn-danger { background: var(--err); }
.btn-success { background: var(--ok); }

/* Прилипшая CTA */
@media (max-width: 640px) {
  .sticky-cta {
    position: fixed;
    left: 0; right: 0;
    bottom: env(safe-area-inset-bottom);
    z-index: 10;
    border-radius: 0;
    padding: 16px;
    font-size: 17px;
  }
}

/* === Бейджи (для статусов) === */
.badge {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 4px 8px; border-radius: 999px; font-size: 12px; font-weight: 700;
  background: color-mix(in srgb, var(--fg) 8%, transparent);
  color: var(--fg);
}
.badge.ok { background: color-mix(in srgb, var(--ok) 18%, transparent); color: #10b981; }
.badge.warn { background: color-mix(in srgb, var(--warn) 22%, transparent); color: #f59e0b; }
.badge.err { background: color-mix(in srgb, var(--err) 22%, transparent); color: #f87171; }

/* === Строки-люди (чекбоксы) === */
.person-row { padding: 12px; border-radius: 14px; gap: 10px; }
.person-row input[type="checkbox"] { width: 22px; height: 22px; }

/* === DayPicker (контраст) === */
.rdp {
  --rdp-accent-color: var(--brand);
  --rdp-accent-background-color: color-mix(in srgb, var(--brand) 14%, transparent);
  --rdp-background-color: var(--elev);
  --rdp-cell-size: 44px;
  --rdp-caption-font-size: 16px;
  --rdp-outline: 2px solid var(--focus);
  --rdp-outline-selected: 2px solid var(--brand);
  color: var(--fg);
}
.rdp-caption_label { font-weight: 700; }
.rdp-head_cell { color: var(--muted); font-weight: 600; }
.rdp-button_reset { border-radius: 10px; }
.rdp-day_selected:not([disabled]), .rdp-day_selected:focus-visible { background: var(--brand); color: #fff; }
.rdp-day_disabled { color: #6b7280 !important; opacity: .55; }

/* === Ленты/списки (черновики) === */
.list { display: grid; gap: 8px; }
.list-item {
  display: grid; gap: 6px; padding: 10px;
  background: var(--elev); border: 1px solid var(--border); border-radius: 12px;
}
.list-item .title { font-weight: 700; }
.list-item .meta { font-size: 13px; color: var(--muted); }

/* === Утилиты === */
.stack-8 > * + * { margin-top: 8px; }
.stack-12 > * + * { margin-top: 12px; }
.stack-16 > * + * { margin-top: 16px; }

/* ---------- Мобильные настройки ---------- */
@media (max-width: 640px) {
  html, body { font-size: 17px; }
  .app-padding {
    padding-top: max(12px, env(safe-area-inset-top));
    padding-right: max(12px, env(safe-area-inset-right));
    padding-bottom: max(12px, env(safe-area-inset-bottom) + 56px);
    padding-left: max(12px, env(safe-area-inset-left));
  }
  .input, select, .btn {
    min-height: 52px; padding: 14px 16px; border-radius: 14px; font-size: 17px;
  }
  .rdp { --rdp-cell-size: 46px; --rdp-caption-font-size: 18px; }
  .rdp-nav_button { width: 44px; height: 44px; }
  .rdp-head_cell { padding: 10px 0; }
}

/* ---------- Очень маленькие экраны ---------- */
@media (max-width: 380px) {
  html, body { font-size: 16px; }
  .input, select, .btn { font-size: 16px; min-height: 50px; }
  .rdp { --rdp-cell-size: 44px; }
}

:root{
  /* уровни поверхностей */
  --surface-0: var(--bg);
  --surface-1: #ffffff;
  --surface-2: #f8fafc;
  --shadow-1: 0 1px 2px rgba(0,0,0,.06), 0 1px 1px rgba(0,0,0,.04);
  --shadow-2: 0 8px 24px rgba(0,0,0,.08);

  /* размеры */
  --radius-lg: 14px;
  --radius-xl: 16px;
  --btn-h: 48px;
  --btn-pad: 12px 16px;
  --btn-fz: 16px;
}

@media (prefers-color-scheme: dark){
  :root{
    --surface-1:#0f141d;
    --surface-2:#121824;
    --shadow-1: 0 1px 2px rgba(0,0,0,.45);
    --shadow-2: 0 10px 28px rgba(0,0,0,.55);
  }
}

/* секция с явным заголовком */
.section { 
  background: var(--surface-1);
  border: 1px solid var(--border);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-1);
}
.section + .section { margin-top: 12px; }

.section__head{
  padding: 10px 14px;
  border-bottom: 1px solid color-mix(in oklab, var(--border) 70%, transparent);
  font-weight: 700;
  display: flex; align-items: center; justify-content: space-between;
}
.section__body{ padding: 12px 14px; }
.section__foot{
  padding: 10px 14px;
  border-top: 1px solid color-mix(in oklab, var(--border) 70%, transparent);
  display: flex; gap: 8px; justify-content: flex-end; align-items: center;
}

/* «плашка» внутри секции — для подсказок/пикапов */
.note {
  background: var(--surface-2);
  border: 1px dashed color-mix(in srgb, var(--border) 70%, transparent);
  border-radius: var(--radius-lg);
  padding: 10px 12px;
  font-size: 14px;
}

.btn{
  width: 100%;
  min-height: var(--btn-h);
  padding: var(--btn-pad);
  font-size: var(--btn-fz);
  border-radius: var(--radius-lg);
  font-weight: 700;
  line-height: 1;
  display: inline-flex; align-items: center; justify-content: center;
  transition: transform .02s ease, box-shadow .15s ease, background .15s ease, color .15s ease;
}

/* варианты */
.btn-primary { background: var(--brand); color:#fff; border: none; box-shadow: var(--shadow-1); }
.btn-primary:hover:not([disabled]) { transform: translateY(-1px); box-shadow: var(--shadow-2); }

.btn-secondary { 
  background: color-mix(in srgb, var(--brand) 12%, var(--surface-1));
  color: var(--fg);
  border: 1px solid color-mix(in srgb, var(--brand) 35%, var(--border));
}
.btn-secondary:hover:not([disabled]){
  background: color-mix(in srgb, var(--brand) 16%, var(--surface-1));
}

.btn-outline {
  background: transparent;
  color: var(--brand);
  border: 1px solid color-mix(in srgb, var(--brand) 60%, var(--border));
}
.btn-outline:hover:not([disabled]) {
  background: color-mix(in srgb, var(--brand) 12%, transparent);
}

.btn[disabled]{ opacity:.6; cursor: default; transform:none; box-shadow:none; }

/* компактная кнопка-строка внутри черновиков */
.btn-ghost{
  width: auto; min-height: 36px; padding: 8px 12px; font-size: 14px;
  background: transparent; border: 1px solid var(--border); color: var(--fg);
  border-radius: 10px;
}
.btn-ghost:hover{ background: var(--surface-2); }

/* заголовки блоков формы делаем контрастнее и компактнее */
.label {
  font-weight: 700; font-size: 14px; margin-bottom: 6px; color: var(--fg);
}

/* поля на «поверхности» */
.input, select{
  background: var(--surface-1);
  border-radius: var(--radius-lg);
  border-color: var(--border);
}
.input::placeholder{ color: color-mix(in srgb, var(--muted) 70%, transparent); }

.drafts {
  display: grid; gap: 10px;
}
.draft {
  background: var(--surface-1);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 10px 12px;
  box-shadow: var(--shadow-1);
}
.draft__row { display: flex; justify-content: space-between; align-items: baseline; gap: 12px; }
.draft__title { font-weight: 700; }
.draft__meta { font-size: 12px; color: var(--muted); }
.draft__sum { font-size: 14px; margin-top: 6px; }
.badge {
  display: inline-block; padding: 4px 8px; border-radius: 999px;
  font-size: 12px; font-weight: 700; color: var(--brand);
  background: color-mix(in srgb, var(--brand) 15%, transparent);
}

.rdp { border-radius: var(--radius-lg); box-shadow: var(--shadow-1); }
.rdp-months { padding: 6px; }


/* ==== Modal ============================================================ */
.modal-backdrop{ position:fixed; inset:0; background:rgba(15,23,42,.45); display:flex; align-items:flex-end; justify-content:center; z-index:9999; }
@media (min-width:640px){ .modal-backdrop{ align-items:center; } }
.modal{ background:#fff; width:100%; max-width:840px; border-radius:16px 16px 0 0; box-shadow:0 10px 30px rgba(0,0,0,.25); max-height:92vh; display:flex; flex-direction:column; }
@media (min-width:640px){ .modal{ border-radius:16px; width:92%; } }
.modal__header{ display:flex; align-items:center; justify-content:space-between; padding:12px 16px; border-bottom:1px solid #e5e7eb; }
.modal__title{ font-weight:600; font-size:16px; }
.modal__close{ background:none; border:none; font-size:22px; line-height:1; cursor:pointer; }
.modal__body{ padding:12px 16px; overflow:auto; }
.modal__footer{ display:flex; gap:8px; justify-content:flex-end; padding:12px 16px; border-top:1px solid #e5e7eb; }

/* ==== Table / Buttons / Helpers ====================================== */
.table-wrap{ overflow:auto; -webkit-overflow-scrolling:touch; }
.table{ width:100%; border-collapse:collapse; }
.table th,.table td{ border:1px solid #e5e7eb; padding:6px 8px; font-size:14px; white-space:nowrap; }
.table thead th{ background:#f9fafb; text-align:left; position:sticky; top:0; }
.table.compact th,.table.compact td{ font-size:13px; padding:6px; }

.btn{ appearance:none; border:1px solid #e5e7eb; background:#fff; padding:10px 14px; border-radius:10px; cursor:pointer; }
.btn:disabled,
.btn[disabled] {
  opacity: .6;
  pointer-events: none;
  color: inherit;        /* <-- ключевая правка */
}
.btn-primary{ background:#2563eb; border-color:#2563eb; color:#fff; }

.card{ border:1px solid #e5e7eb; border-radius:12px; padding:12px; }
.card__title{ font-weight:600; font-size:18px; }
.row{ margin-top:10px; }
.w-100{ width:100%; }
.muted{ color:#6b7280; }
.err{ color:#b91c1c; }

/* ==== Badges for statuses ============================================= */
.badge{ display:inline-block; padding:2px 8px; border-radius:999px; font-size:12px; border:1px solid #e5e7eb; }
.badge-draft{ background:#fff; color:#374151; }
.badge-pending{ background:#fff7ed; color:#9a3412; border-color:#fed7aa; }
.badge-confirmed{ background:#ecfdf5; color:#065f46; border-color:#a7f3d0; }
.badge-cancelled{ background:#fef2f2; color:#991b1b; border-color:#fecaca; }


/* Кнопки в компактной таблице внутри модалки предпросмотра */
.table.compact td .btn.btn-xs {
  font-size: 12px;          /* вернуть текст */
  line-height: 1.2;
  padding: 4px 8px;
  text-indent: 0;           /* на случай стиля "иконки" */
  color: inherit;           /* наследуем нормальный цвет текста */
}

/* Контраст на warning-кнопке */
.btn-warning {
  background: #f59e0b;
  color: #fff;
}
.btn-warning:disabled {
  background: #f3f4f6;
  color: #9ca3af;        /* читаемый серый вместо “прозрачного” */
}

/* Для outline-кнопок оставим читаемый цвет */
.btn.btn-xs.btn-outline {
  color: inherit;
}

/* Если где-то было глобальное правило, прячущие текст */
.table.compact td .btn.btn-xs::after {
  content: none;            /* отключить подмену текста псевдоэлементом, если такое было */
}

/* Кнопки в модалке: гарантируем, что текст виден */
.modal__footer .btn,
.modal__footer .btn-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;          /* ← ключевое: не 0 */
  line-height: 1.2;
  color: inherit;           /* для .btn (outline) */
}

.btn.btn-primary {
  color: #fff;              /* белый текст на синей кнопке */
}

/* На всякий случай выключим странные трюки */
.modal__footer .btn {
  text-indent: 0 !important;
  letter-spacing: normal !important;
}

